<!DOCTYPE html>
<html>
  <head>
    <title>index</title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
  </head>
  <body>
    <h3>
      currentPage : <%= paging.currentPage %><br>
      currentSet : <%= paging.currentSet %><br>
      startPage : <%= paging.startPage %><br>
      endPage : <%= paging.endPage %><br>
    </h3>
    <div class="container">
      <table class="table">
        <thead>
          <tr>
            <th scope="col">idx</th>
            <th scope="col">name</th>
            <th scope="col">age</th>
            <th scope="col">grade</th>
          </tr>
        </thead>
        <tbody>
          <!-- 게시글-->
          <% for(let i=0; i<data.length; i++){ %> 
            <tr>
              <th scope="row"><%= data[i].idx%></th>
              <td><%= data[i].name %></td>
              <td><%= data[i].age %></td>
              <td><%= data[i].grade %></td>
          </tr>
          <% } %>  
        </tbody>
      </table>
      
      <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-center">
          <!-- 뒤로가기 버튼 (1보다 작으면 무조건 뒤로가기 생성)-->
          <% if(paging.currentSet > 1) {%>
          <li class="page-item">
            <a class="page-link" href="/?page=<%=paging.startPage-1%>" aria-label="Previous">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <% } %>

          <!--숫자 버튼-->
          <% for(let i=paging.startPage; i<=paging.endPage; i++){
            if(i > paging.totalPage){break;}  
            
            if(i == paging.currentPage){ %>
              <tr>
                <td>    
                  <li class="page-item active"><a class="page-link" href='/?page=<%=i%>'><%=i%></a></li>
                </td>
              </tr>
            <% } else {%> 
            <tr>
              <td>    
                <li class="page-item"><a class="page-link" href='/?page=<%=i%>'><%=i%></a></li>
              </td>
            </tr>
          <% } 
          } %> 

          <!--앞으로 버튼 (현재 세트가 토탈보다 작으면 생성)-->
          <% if(paging.currentSet < paging.totalSet) {%>
            <li class="page-item">
              <a class="page-link" href="/?page=<%=paging.endPage+1%>" aria-label="Next">
                <span aria-hidden="true">&raquo;</span>
              </a>
            </li>
          <% } %>

        </ul>
      </nav>
    </div>
  </body>
</html>
