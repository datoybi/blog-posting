<!DOCTYPE html>
<html>
  <head>
    <title>파일업로드, 다운로드, 뷰어 예제</title>
    <link rel='stylesheet' href='https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css' />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src='/javascripts/update.js'></script>
    <link rel='stylesheet' href='/stylesheets/style.css' />
  </head>
  <body>
    <div class="container">
      <h3>게시물 수정</h3><br/><br/>
      <div class="mb-3 row">
        <label for="title" class="col-sm-2 col-form-label">제목</label>
        <div class="col-sm-10">
          <input type="text" id="title" class="form-control" name="title" value="<%=data.contents[0].title %>">
        </div>
      </div>
      <div class="mb-3 row">
        <label for="content" class="col-sm-2 col-form-label">내용</label>
        <div class="col-sm-10">
          <input type="text" id="content" class="form-control" name="content" value="<%=data.contents[0].contents %>">
        </div>
      </div>
      <div class="mb-3 row">
        <label for="content" class="col-sm-2 col-form-label">파일 첨부</label>
          <div class="col-sm-10">
            <div class="col-sm-10">
              <input type="file" id="image" accept="image/*" class="form-control" onchange="setThumbnail(event)" name="attachments" multiple>
          </div>
        </div>
      </div> 
        <div class="mb-3 row">
          <div class="col-sm-10" id="imageContainer">
            <% if(data.files) {%> 
                <% data.files.forEach(file=> { %>
                    <div style="width: 110px; height: 100px; float: left;" id="<%=file.name%>">
                        <img class="viewer-image" src="http://192.168.1.55:3001/uploads/<%=file.name%>">
                        <p style="position: relative; top: -108px; left: 90px; font-size: 15px; width:22px; cursor: pointer;" onclick="onclicUpdateDelBtn(event)">⛔</p>
                    </div>    
                <% }) %>
            <% } %>
        </div>
      </div>   
      <input type="hidden" id="postId" value ="<%= postId %>" />
      <input type="hidden" id="oldFiles" value ="<%=JSON.stringify(data.files) %>" />
      <div class="col-auto">
        <button id="submitBtn" type="button" class="btn btn-primary mb-3" onclick="formSubmit()">제출</button>
      </div>
      <hr>
    </div>
</body>
</html>
